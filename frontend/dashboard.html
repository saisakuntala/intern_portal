<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Intern Dashboard</title>
<!-- Google Fonts for Montserrat -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Montserrat', Arial, sans-serif;
    background: linear-gradient(135deg, #232526 0%, #6C47FF 100%);
    min-height: 100vh;
    margin: 0;
    color: #22223b;
  }
  nav {
    margin-bottom: 32px;
    background: rgba(255,255,255,0.12);
    padding: 13px 26px;
    border-radius: 18px;
    box-shadow: 0 2px 14px rgba(108,71,255,0.12);
    display: flex;
    gap: 21px;
    justify-content: flex-end;
    align-items: center;
    font-weight: 600;
  }
  nav a {
    color: #fff;
    text-decoration: none;
    background: linear-gradient(90deg, #24C6DC 0%, #6C47FF 100%);
    border-radius: 8px;
    font-weight: bold;
    padding: 8px 20px;
    transition: background 0.2s, transform 0.1s;
  }
  nav a:hover {
    background: linear-gradient(90deg, #6C47FF 0%, #24C6DC 100%);
    color: #232526;
    transform: translateY(-2px) scale(1.04);
  }
  h1, h2 {
    letter-spacing: 2px;
    color: #463bb0;
    margin-bottom: 12px;
  }
  .card, .section {
    background: #fff;
    box-shadow: 0 8px 32px rgba(60,80,200,0.13);
    border-radius: 20px;
    padding: 30px 35px;
    margin-bottom: 34px;
    transition: box-shadow 0.2s;
  }
  .card:hover, .section:hover {
    box-shadow: 0 18px 44px rgba(60,100,200,0.17);
  }
  .section {
    margin-bottom: 18px;
  }
  .rewards-list {
    display: flex;
    gap: 18px;
    flex-wrap: wrap;
    margin-top: 17px;
  }
  .reward {
    flex: 1;
    min-width: 110px;
    background: linear-gradient(135deg, #F7971E 0%, #FFD200 100%);
    color: #282825;
    padding: 18px 22px;
    border-radius: 12px;
    font-weight: bold;
    box-shadow: 0 2px 16px #F7971E33;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.13rem;
    margin: 4px 0;
    letter-spacing: .7px;
    transition: transform 0.1s, box-shadow 0.2s;
  }
  .reward:nth-child(2) {
    background: linear-gradient(120deg, #24C6DC 0%, #514A9D 100%);
    color: #fff;
    box-shadow: 0 3px 16px #24C6DC33;
  }
  .reward:nth-child(3) {
    background: linear-gradient(120deg, #FF616D 0%, #FFC371 100%);
    color: #442913;
    box-shadow: 0 3px 16px #FF616D33;
  }
  .reward:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 22px #c5aaff44;
  }
  @media (max-width: 700px) {
    nav { flex-direction: column; align-items: stretch; }
    .card, .section { padding: 15px 10px; }
    .rewards-list { flex-direction: column; }
    body { padding: 7px; }
  }
</style>

</head>
<body>
  <nav>
    <a href="dashboard.html">Dashboard</a>
    <a href="leaderboard.html">Leaderboard</a>
    <a href="index.html">Logout</a>
  </nav>

  <h1>Welcome, <span id="internName">Loading...</span></h1>

  <div class="section">
    <h2>Your Referral Code:</h2>
    <p id="referralCode">Loading...</p>
  </div>

  <div class="section">
    <h2>Total Donations Raised:</h2>
    <p id="totalDonations">Loading...</p>
  </div>

  <div class="section">
    <h2>Rewards & Unlockables</h2>
    <ul>
      <li>Free Swag Pack</li>
      <li>Amazon Gift Card</li>
      <li>Exclusive Webinar Access</li>
    </ul>
  </div>

  <script>
    async function loadUserData() {
      try {
        const response = await fetch('http://localhost:5000/api/user');
        const data = await response.json();

        document.getElementById('internName').textContent = data.name;
        document.getElementById('referralCode').textContent = data.referral_code;
        document.getElementById('totalDonations').textContent = '$' + data.total_donations.toLocaleString();
      } catch (error) {
        console.error('Error fetching user data:', error);
        document.getElementById('internName').textContent = 'Error loading data';
      }
    }

    loadUserData();
    function animateValue(id, start, end, duration) {
  let range = end - start;
  let current = start;
  let increment = range / (duration / 20);
  let obj = document.getElementById(id);
  function step() {
    current += increment;
    if (increment > 0 && current >= end) current = end;
    obj.textContent = '$' + Math.floor(current).toLocaleString();
    if (current < end) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

// Fetch API as before, but animate totalDonations:
fetch('http://localhost:5000/api/user')
  .then(response => response.json())
  .then(data => {
      document.getElementById('internName').textContent = data.name;
      document.getElementById('referralCode').textContent = data.referral_code;
      animateValue('totalDonations', 0, data.total_donations, 1200);
      document.querySelectorAll('.fade').forEach(e => e.classList.add('loaded'));
  });

  </script>
</body>
</html>
